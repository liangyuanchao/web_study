<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <p>
		姓名：<input type="text" id="username">
	</p>
	<p>
		年龄：<input type="text" id="age">
	</p>
	<p>
		<input type="button" value="提交" id="btn">
    </p>
    <script type="text/javascript">
        let username = document.querySelector('#username');
        let age = document.querySelector('#age');
        let btn = document.querySelector('#btn');
        btn.onclick = function() {
            // 1.创建ajax对象
            let xhr = new XMLHttpRequest();
            // 2. 获取文本框输入的值
            let nameValue = username.value;
            let ageValue = age.value;
            // 拼接请求参数
            // let data = 'username=' + nameValue + '&age=' + ageValue;
            // 配置ajax对象
            // 3.请求方式与请求地址
            xhr.open('post', '/post', true);

            // 设置请求参数格式的类型(post请求必须设置)
            // （1）普通编码
            // xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

            // （2）二进制编码
            // xhr.setRequestHeader("Content-Type","multipart/form-data");

            // （3）json编码格式
            xhr.setRequestHeader("content-type","application/json");
            let data = JSON.stringify({
                username: nameValue,
                age: ageValue
            })
            

            // 4.发送请求
            xhr.send(data);
            // 5.获取服务器端响应的数据
            xhr.onload = function() {
                console.log(xhr.responseText);
                // 获取返还头信息
                // console.log(xhr.getAllResponseHeaders());
                console.log(xhr.getResponseHeader("content-type"));
            }
        }
    </script>
</body>
</html>